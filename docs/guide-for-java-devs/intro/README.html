<!DOCTYPE html>
<html lang="en">
<head>
  <title>Introduction - Vert.x</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta content="Eclipse Vert.x is a tool-kit for building reactive applications on the JVM." name="description">
  <link href="https://vertx.tk/stylesheets/docs.css" media="screen" rel="stylesheet">
  <link href="https://vertx.tk/stylesheets/font-awesome.min.css" media="screen" rel="stylesheet">
  <link href="https://vertx.tk/javascripts/styles/rainbow.min.css" media="screen" rel="stylesheet">
  <!-- IE 6-8 support of HTML 5 elements -->
  <!--[if lt IE 9]>
  <script src="http://static.jboss.org/theme/js/libs/html5/pre3.6/html5.min.js"></script>
  <![endif]-->

  <link rel="apple-touch-icon" sizes="57x57" href="https://vertx.tk/assets/favicons/vertx-favicon-7/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="https://vertx.tk/assets/favicons/vertx-favicon-7/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="https://vertx.tk/assets/favicons/vertx-favicon-7/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="https://vertx.tk/assets/favicons/vertx-favicon-7/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="https://vertx.tk/assets/favicons/vertx-favicon-7/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="https://vertx.tk/assets/favicons/vertx-favicon-7/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="https://vertx.tk/assets/favicons/vertx-favicon-7/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="https://vertx.tk/assets/favicons/vertx-favicon-7/apple-touch-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="https://vertx.tk/assets/favicons/vertx-favicon-7/apple-touch-icon-180x180.png">
  <link rel="icon" type="image/png" href="https://vertx.tk/assets/favicons/vertx-favicon-7/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="https://vertx.tk/assets/favicons/vertx-favicon-7/android-chrome-192x192.png" sizes="192x192">
  <link rel="icon" type="image/png" href="https://vertx.tk/assets/favicons/vertx-favicon-7/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="https://vertx.tk/assets/favicons/vertx-favicon-7/favicon-16x16.png" sizes="16x16">
  <link rel="manifest" href="https://vertx.tk/assets/favicons/vertx-favicon-7/manifest.json">
  <link rel="mask-icon" href="https://vertx.tk/assets/favicons/vertx-favicon-7/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#7d3194">
  <meta name="msapplication-TileImage" content="https://vertx.tk/assets/favicons/vertx-favicon-7/mstile-144x144.png">
  <meta name="theme-color" content="#ffffff">

  <link href="https://fonts.googleapis.com/css?family=Ubuntu:400,500,700,400italic" rel="stylesheet" type="text/css">
  <link rel="alternate" type="application/rss+xml" title="RSS"
     href="https://vertx.tk/feed.xml">
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-30144458-1', 'auto');
    ga('create', 'UA-71153120-1', 'auto', 'tracker');
    ga('send', 'pageview');
    ga('tracker.send', 'pageview');
  </script>
  <style>
    .page-link-to-github {
      position: relative;
      z-index: 1;
      display: inline-block;
      border: 1px solid #782B90;
      border-radius: 5px;
      color: #782B90;
      font-size: 12px;
      padding: 4px 10px;
      text-decoration: none;
      background-color: #ffffff;
    }
    .page-link-to-github:hover {
      color: #ffffff;
      border-color: #ffffff;
      background-color: #782B90;
    }

    .page-link-to-github .github-icon {
      position: absolute;
      display: inline-block;
      width: 20px;
      height: 20px;
      /*background-position: -50px 0*/
      background: url('https://vertx.tk/assets/github.png') no-repeat 0 0;
    }

    @media (-webkit-min-device-pixel-ratio: 2),(min-resolution:192dpi) {
      .page-link-to-github .github-icon {
        background-image:url('https://vertx.tk/assets/github@2x.png');
        background-size: 150px auto
      }
    }

    .page-link-to-github:hover .github-icon {
      /*background-position: 0 0*/
      background-position: -100px 0
    }
    .text {
      text-decoration: underline
    }
    .page-link-to-github .text {
      padding-left: 27px
    }
    .text {
      padding-right: 8px
    }
    .page-link-to-github {
      float: right;
      top: 4px
    }

  </style>
</head>
<body>

<a href="http://www.reactivemanifesto.org/" id="reactive-manifesto-banner">
  <img style="border: 0; position: fixed; right: 0; top:0; z-index: 9000"
    src="https://d379ifj7s9wntv.cloudfront.net/reactivemanifesto/images/ribbons/we-are-reactive-black-right.png">
</a>

<a id="skippy" class="sr-only sr-only-focusable" href="#content"><div class="container"><span class="skiplink-text">Skip to main content</span></div></a>

<header class="navbar navbar-default navbar-static-top" id="top" role="banner">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#vertx-navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="https://vertx.tk/" class="navbar-brand"><img alt="Brand" src="https://vertx.tk/assets/logo-sm.png"></a>
    </div>
    <nav class="collapse navbar-collapse" id="vertx-navbar-collapse">
      <ul class="nav navbar-nav navbar-right">
        <li><a href="http://start.vertx.io">Starter</a></li>
        <li><a href="https://vertx.tk/download/">下载</a></li>
        <li><a href="https://vertx.tk/docs/">文档</a></li>
        <li><a href="https://github.com/vert-x3/wiki/wiki">维基</a></li>
        <li><a href="https://vertx.tk/community/">社区</a></li>
        <li><a href="https://vertx.tk/materials/">资料</a></li>
        <li><a href="https://vertx.tk/blog/">博客</a></li>
      </ul>
    </nav>
  </div>
</header>



  <div class="page-header" id="content">
    <div class="container">
      <div class="row">
        <div class="col-sm-12">
          <h1>Introduction</h1>
          
        </div>
      </div>
    </div>
  </div>



<div id="content">
  <div class="container docs-content">
    <div class="row">
      <div class="col-sm-12 col-md-push-9 col-md-3 hidden-xs hidden-sm">
        <div id="sidebar" data-spy="affix">
          <ul class="sectlevel1">
<li><a href="#_about_this_guide">About this guide</a></li>
<li><a href="#_what_is_vert_x">What is Vert.x?</a></li>
<li><a href="#_core_vert_x_concepts">Core Vert.x concepts</a>
<ul class="sectlevel2">
<li><a href="#_threading_and_programming_models">Threading and programming models</a></li>
<li><a href="#_event_bus">Event bus</a></li>
</ul>
</li>
</ul>
        </div>
      </div>
      <div class="col-sm-12 col-md-pull-3 col-md-9">
        <div class="toc hidden-md hidden-lg">
          <h2>Table of Contents</h2>
          <ul class="sectlevel1">
<li><a href="#_about_this_guide">About this guide</a></li>
<li><a href="#_what_is_vert_x">What is Vert.x?</a></li>
<li><a href="#_core_vert_x_concepts">Core Vert.x concepts</a>
<ul class="sectlevel2">
<li><a href="#_threading_and_programming_models">Threading and programming models</a></li>
<li><a href="#_event_bus">Event bus</a></li>
</ul>
</li>
</ul>
        </div>

  <a href="https://github.com/okou19900722/vertx-web-site-translation-chinese/tree/master/vertx-translation-stack/guide-for-java-devs-translation"
     class="page-link-to-github"
     target="_blank"
     title="Edit this page on GitHub">
    <i class="github-icon"></i>
    <span class="text">编辑本页</span>
  </a>

        <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This guide is a gentle introduction to asynchronous programming with Vert.x, primarily aimed at developers familiar with mainstream non-asynchronous web development frameworks and libraries (e.g., Java EE, Spring).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_about_this_guide">About this guide</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We assume that the reader is familiar with the Java programming language and its ecosystem.</p>
</div>
<div class="paragraph">
<p>We will start from a wiki web application backed by a relational database and server-side rendering of pages; then we will evolve the application through several steps until it becomes a modern single-page application with "real-time".<sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnote_1" title="View footnote.">1</a>]</sup> web features.
Along the way you will learn to:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Design a web application with server-side rendering of pages through templates, and using a relational database for persisting data.</p>
</li>
<li>
<p>Cleanly isolate each technical component as a reusable event processing unit called a <em>verticle</em>.</p>
</li>
<li>
<p>Extract Vert.x services for facilitating the design of verticles that communicate with each other seamlessly both within the same JVM process or among distributed nodes in a cluster.</p>
</li>
<li>
<p>Testing code with asynchronous operations.</p>
</li>
<li>
<p>Integrating with third-party services exposing a HTTP/JSON web API.</p>
</li>
<li>
<p>Exposing a HTTP/JSON web API.</p>
</li>
<li>
<p>Securing and controlling access using HTTPS, user authentication for web browser sessions and JWT tokens for third-party client applications.</p>
</li>
<li>
<p>Refactoring some code to use reactive programming with the popular RxJava library and its Vert.x integration.</p>
</li>
<li>
<p>Client-side programming of a single-page application with AngularJS.</p>
</li>
<li>
<p>Real-time web programming using the unified Vert.x event bus integration over SockJS.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The source of both this document and the code examples are available from <a href="https://github.com/vert-x3/vertx-guide-for-java-devs" class="bare">https://github.com/vert-x3/vertx-guide-for-java-devs</a>.
We welcome issue reports, feedback and pull-requests!
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_what_is_vert_x">What is Vert.x?</h2>
<div class="sectionbody">
<div class="quoteblock">
<blockquote>
Eclipse Vert.x is a toolkit for building reactive applications on the JVM.
</blockquote>
<div class="attribution">
&#8212; Vert.x website
</div>
</div>
<div class="paragraph">
<p>Eclipse Vert.x (which we will just call <em>Vert.x</em> in the remainder of this document) is an opensource project at the Eclipse Foundation.
Vert.x was initiated in 2012 by Tim Fox.</p>
</div>
<div class="paragraph">
<p>Vert.x is not a framework but a toolkit: the core library defines the fundamental APIs for writing asynchronous networked applications, and then you can pick the useful modules for your application (e.g., database connection, monitoring, authentication, logging, service discovery, clustering support, etc).
Vert.x is based on the <a href="http://netty.io/">Netty project</a>, a high-performance asynchronous networking library for the JVM.
Vert.x will let you access the Netty internals <em>if need be</em>, but in general you will better benefit from the higher-level APIs that Vert.x provides while not sacrificing performance compared to <em>raw</em> Netty.</p>
</div>
<div class="paragraph">
<p>Vert.x does not impose any packaging or build environment.
Since Vert.x core itself is just a regular Jar library it can be embedded inside applications packaged as a set of Jars, a single Jar with all dependencies, or it can even be deployed inside popular component and application containers.</p>
</div>
<div class="paragraph">
<p>Because Vert.x was designed for asynchronous communications it can deal with more concurrent network connections with less threads than synchronous APIs such as Java servlets or <code>java.net</code> socket classes.
Vert.x is useful for a large range of applications: high volume message / event processing, micro-services, API gateways, HTTP APIs for mobile applications, etc.
Vert.x and its ecosystem provide all sorts of technical tools for building end-to-end reactive applications.</p>
</div>
<div class="paragraph">
<p>While it may sound like Vert.x is only useful for demanding applications, the present guide also states that Vert.x works very well for more traditional web applications.
As we will see, the code will remain relatively easy to comprehend, but if the application needs to face a sudden peak in traffic then the code is already written with the essential ingredient for scaling up: <em>asynchronous processing of events</em>.</p>
</div>
<div class="paragraph">
<p>Finally, it is worth mentioning that Vert.x is <em>polyglot</em> as it supports a wide range of popular JVM languages: Java, Groovy, Scala, Kotlin, JavaScript, Ruby and Ceylon.
The goal when supporting a language in Vert.x is not just to provide access to the APIs, but also to make sure that the language-specific APIs are idiomatic in each target language (e.g., using Scala futures in place of Vert.x futures).
It is well-possible to develop different technical parts of a Vert.x application using different JVM languages.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_core_vert_x_concepts">Core Vert.x concepts</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are 2 key concepts to learn in Vert.x:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>what a <em>verticle</em> is, and</p>
</li>
<li>
<p>how the <em>event bus</em> allows verticles to communicate.</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="_threading_and_programming_models">Threading and programming models</h3>
<div class="paragraph">
<p>Many networking libraries and frameworks rely on a simple threading strategy: each network client is being assigned a thread upon connection, and this thread deals with the client until it disconnects.
This is the case with Servlet or networking code written with the <code>java.io</code> and <code>java.net</code> packages.
While this <em>"synchronous I/O"</em> threading model has the advantage of remaining simple to comprehend, it hurts scalability with too many concurrent connections as system threads are not cheap, and under heavy loads an operating system kernel spends significant time <em>just</em> on thread scheduling management.
In such cases we need to move to <em>"asynchronous I/O"</em> for which Vert.x provides a solid foundation.</p>
</div>
<div class="paragraph">
<p>The unit of deployment in Vert.x is called a <em>Verticle</em>.
A verticle processes incoming events over an <em>event-loop</em>, where events can be anything like receiving network buffers, timing events, or messages sent by other verticles.
Event-loops are typical in asynchronous programming models:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/images/event-loop.png" alt="event loop">
</div>
</div>
<div class="paragraph">
<p>Each event shall be processed in a <em>reasonable</em> amount of time to not block the event loop.
This means that <em>thread blocking</em> operations shall not be performed while executed on the event loop, exactly like processing events in a graphical user interface (e.g., freezing a Java / Swing interface by doing a slow network request).
As we will see later in this guide, Vert.x offers mechanisms to deal with blocking operations outside of the event loop.
In any case Vert.x emits warnings in logs when the event loop has been processing an event for <em>too long</em>, which is also configurable to match application-specific requirements (e.g., when working on slower IoT ARM boards).</p>
</div>
<div class="paragraph">
<p>Every event loop is attached to a thread.
By default Vert.x attaches 2 event loops per CPU core thread.
The direct consequence is that a regular verticle always processes events on the same thread, so there is no need to use thread coordination mechanisms to manipulate a verticle state (e.g, Java class fields).</p>
</div>
<div class="paragraph">
<p>A verticle can be passed some configuration (e.g., credentials, network addresses, etc) and a verticle can be deployed several times:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/images/verticle-threading-config.png" alt="verticle threading config">
</div>
</div>
<div class="paragraph">
<p>Incoming network data are being received from accepting threads then passed as events to the corresponding verticles.
When a verticle opens a network server and is deployed more than once, then the events are being distributed to the verticle instances in a round-robin fashion which is very useful for maximizing CPU usage with lots of concurrent networked requests.
Finally, verticles have a simple start / stop life-cycle, and verticles can deploy other verticles.</p>
</div>
</div>
<div class="sect2">
<h3 id="_event_bus">Event bus</h3>
<div class="paragraph">
<p>Verticles form technical units of deployments of code in Vert.x.
The Vert.x <em>event bus</em> is the main tool for different verticles to communicate through asynchronous message passing.
For instance suppose that we have a verticle for dealing with HTTP requests, and a verticle for managing access to the database.
The event bus allows the HTTP verticle to send a request to the database verticle that performs a SQL query, and responds back to the HTTP verticle:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/images/event-bus.png" alt="event bus">
</div>
</div>
<div class="paragraph">
<p>The event-bus allows passing any kind of data, although JSON is the preferred exchange format since it allows verticles written in different languages to communicate, and more generally JSON is a popular general-purpose semi-structured data marshaling text format.</p>
</div>
<div class="paragraph">
<p>Message can be sent to <em>destinations</em> which are free-form strings.
The event bus supports the following communication patterns:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>point-to-point messaging, and</p>
</li>
<li>
<p>request-response messaging and</p>
</li>
<li>
<p>publish / subscribe for broadcasting messages.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The event bus allows verticles to transparently communicate not just within the same JVM process:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>when network clustering is activated, the event bus is <em>distributed</em> so that messages can be sent to verticles running on other application nodes,</p>
</li>
<li>
<p>the event-bus can be accessed through a simple TCP protocol for third-party applications to communicate,</p>
</li>
<li>
<p>the event-bus can also be exposed over general-purpose messaging bridges (e.g, AMQP, Stomp),</p>
</li>
<li>
<p>a SockJS bridge allows web applications to seamlessly communicate over the event bus from JavaScript running in the browser by receiving and publishing messages just like any verticle would do.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
        
          <div id="footnotes">
          
            <div class="footnote" id="_footnote_1">
              <a href="#_footnoteref_1">1</a>. Note that the widespread usage of the term "real-time" in the context of web technologies shall not be confused with <em>hard</em> or <em>soft</em> real-time in specialized operating systems.
            </div>
          
        </div>
        

        
          <div id="footer">
            <div id="footer-text">
              
                上次更新时间 2018-06-05 07:44:38 CST
              
              
            </div>
          </div>
        
      </div>
    </div>
  </div>
</div>

<footer>
  <div class="container">
    <div class="row">
      <div class="col-xs-4 col-sm-4 col-md-2 col-lg-2">
        <h2>Eclipse Vert.x</h2>
        <ul class="list-unstyled">
          <li><a href="https://vertx.tk/">主页</a></li>
          <li><a href="https://vertx.tk/download/">下载</a></li>
          <li><a href="https://vertx.tk/docs/">文档</a></li>
          <li><a href="https://github.com/vert-x3/wiki/wiki">维基</a></li>
          <li><a href="https://vertx.tk/blog/">博客</a></li>
        </ul>
      </div>
      <div class="col-xs-4 col-sm-4 col-md-2 col-lg-2">
        <h2>Community</h2>
        <ul class="list-unstyled">
          <li><a href="https://vertx.tk/community/">Help &amp; Contributors</a></li>
          <li><a href="https://vertx.tk/materials/">Learning materials</a></li>
          <li><a href="https://groups.google.com/forum/?fromgroups#!forum/vertx">User Group</a></li>
          <li><a href="https://groups.google.com/forum/?fromgroups#!forum/vertx-dev">Developer Group</a></li>
          <li><a href="//shang.qq.com/wpa/qunwpa?idkey=587f58cacb9557e3291b46098e0fe09427b98a1c0f866da23c04c2762bc7e2ad">QQ群</a></li>
        </ul>
      </div>
      <div class="col-xs-4 col-sm-4 col-md-2 col-lg-2">
        <h2>Eclipse</h2>
        <ul class="list-unstyled">
          <li><a href="http://www.eclipse.org/">Eclipse Foundation</a></li>
          <li><a href="https://eclipse.org/legal/privacy.php">Privacy Policy</a></li>
          <li><a href="https://eclipse.org/legal/termsofuse.php">Terms of Use</a></li>
          <li><a href="https://eclipse.org/legal/copyright.php">Copyright Agent</a></li>
          <li><a href="http://www.eclipse.org/legal">Legal Resources</a></li>
        </ul>
      </div>

      <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 copyright">
        <p>Eclipse Vert.x is open source and dual-licensed under the <a href="http://www.eclipse.org/legal/epl-v20.html">Eclipse Public License 2.0</a> and <a href="https://www.apache.org/licenses/LICENSE-2.0.html">Apache License 2.0</a>.</p>
        <p>This website is licensed under the <a href="http://creativecommons.org/licenses/by-sa/3.0/">CC BY-SA 3.0 License</a>.<br>
        Design by <a href="https://www.michel-kraemer.com">Michel Kr&auml;mer</a>.</p>
        <div class="row">
          <div class="col-sm-12 col-md-5 col-md-offset-1 col-lg-offset-2">
            <a href="http://eclipse.org">
            <img class="logo eclipse-logo" src="https://vertx.tk/assets/eclipse_logo_grey_small.png" width="204" height="48">
            </a>
          </div>
          <div class="col-sm-12 col-md-5 col-md-offset-1 col-lg-offset-0">
            <a href="http://cloudbees.com">
            <img class="logo cloudbees-logo" src="https://vertx.tk/assets/Button-Built-on-CB-1-grey.png" width="180" height="48">
           </a>
          </div>
          <div class="col-sm-12 col-md-5 col-md-offset-7 jprofiler">
            <a href="http://www.ej-technologies.com/products/jprofiler/overview.html"
            style="text-decoration:none">
            <img class="logo jprofiler-logo" src="https://vertx.tk/assets/jprofiler-logo.png" width="48" height="48"><span class="jprofiler-logo">&nbsp; JPROFILER</span>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="https://vertx.tk/javascripts/bootstrap.min.js"></script>
<script src="https://vertx.tk/javascripts/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>



<script src="https://vertx.tk/javascripts/sidebar.js"></script>


<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#64386b",
      "text": "#ffcdfd"
    },
    "button": {
      "background": "transparent",
      "text": "#f8a8ff",
      "border": "#f8a8ff"
    }
  },
  "content": {
    "message": "This website uses anonymous cookies to ensure we provide you the best experience. ",
    "link": "Opt out!",
    "href": "https://tools.google.com/dlpage/gaoptout/"
  }
})});
</script>
</body>
</html>

